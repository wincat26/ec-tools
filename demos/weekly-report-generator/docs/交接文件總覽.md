# 電商週報生成器 - 交接文件總覽

**建立日期**：2025-11-05  
**目的**：讓新接手的夥伴能夠快速理解專案並順利接手

---

## 📚 文件清單

### 🎯 必讀文件（按順序閱讀）

1. **[QUICK_START.md](QUICK_START.md)** ⭐ 從這裡開始
   - 5 分鐘快速上手
   - 環境準備、認證設定、測試連線
   - **行數**：約 100 行

2. **[HANDOVER_DOCUMENT.md](HANDOVER_DOCUMENT.md)** ⭐⭐⭐ **最重要！**
   - 完整的專案說明
   - 系統架構、技術棧、核心功能
   - 資料庫配置、關鍵邏輯
   - 常見問題排錯、待辦事項
   - **行數**：823 行（最詳細）

3. **[CODE_STRUCTURE.md](CODE_STRUCTURE.md)** ⭐⭐
   - 每個檔案的詳細說明
   - 關鍵函數詳解、資料流程
   - 設計決策、除錯技巧
   - **行數**：747 行

### 📋 技術文件（需要時參考）

4. **[AUTHENTICATION_SETUP.md](AUTHENTICATION_SETUP.md)** - Google Cloud 認證設定
5. **[DATABASE_SCHEMA.md](DATABASE_SCHEMA.md)** - 資料庫結構說明
6. **[SQL_QUERY_UPDATE.md](SQL_QUERY_UPDATE.md)** - SQL 查詢更新記錄
7. **[TRAFFIC_CLASSIFICATION.md](TRAFFIC_CLASSIFICATION.md)** - 流量分類規則
8. **[TRAFFIC_ANALYSIS_IMPLEMENTATION.md](TRAFFIC_ANALYSIS_IMPLEMENTATION.md)** - 流量分析實作
9. **[TRANSACTION_ID_VERIFICATION.md](TRANSACTION_ID_VERIFICATION.md)** - Transaction ID 驗證

### 📝 其他文件

10. **[README.md](README.md)** - 專案說明（入口文件）
11. **[DOCUMENTATION_INDEX.md](DOCUMENTATION_INDEX.md)** - 文件索引
12. **[CHANGELOG.md](CHANGELOG.md)** - 更新日誌
13. **[FINAL_SUMMARY.md](FINAL_SUMMARY.md)** - 完成總結

---

## 🚀 快速開始（5 步驟）

### 步驟 1：閱讀快速開始指南
```bash
# 開啟文件
open QUICK_START.md
```

### 步驟 2：安裝依賴
```bash
cd weekly-report-generator
pip install -r requirements.txt
```

### 步驟 3：設定認證
```bash
gcloud auth application-default login
gcloud auth application-default set-quota-project datalake360-saintpaul
```

### 步驟 4：測試連線
```bash
python test_connection.py
```

### 步驟 5：生成週報
```bash
python src/main.py
```

---

## 📖 學習路徑

### 第一天（基礎了解）

1. ✅ 閱讀 `QUICK_START.md`（10 分鐘）
2. ✅ 執行快速開始步驟（30 分鐘）
3. ✅ 閱讀 `HANDOVER_DOCUMENT.md` 的前半部分（1 小時）
   - 專案概述
   - 系統架構
   - 技術棧與依賴

### 第二天（深入了解）

1. ✅ 閱讀 `HANDOVER_DOCUMENT.md` 的後半部分（1 小時）
   - 核心功能模組
   - 資料庫配置
   - 關鍵邏輯說明

2. ✅ 閱讀 `CODE_STRUCTURE.md`（1 小時）
   - 了解每個檔案的用途
   - 理解資料流程

### 第三天（實作練習）

1. ✅ 執行測試腳本
   ```bash
   python test_queries.py
   python check_transaction_id_format.py
   ```

2. ✅ 嘗試修改配置
   - 修改品牌名稱
   - 修改圖表顏色
   - 調整查詢邏輯

---

## 🔑 關鍵資訊速查

### 專案路徑
```
/Users/winson/Dropbox/vibe_tools/ec-tools/weekly-report-generator
```

### BigQuery 設定
```
專案 ID: datalake360-saintpaul
資料集: datalake_stpl, analytics_304437305
```

### 關鍵欄位
```
訂單表: ord_rev (金額), bhv1 (狀態), ord_id (訂單編號)
GA4 表: transaction_id (17位數字), traffic_source (流量來源)
```

### 執行命令
```bash
# 生成週報
python src/main.py

# 測試連線
python test_connection.py

# 測試查詢
python test_queries.py
```

---

## ⚠️ 重要提醒

1. **時間範圍**：週報使用「週一到週日」，不是「最近 7 天」
2. **欄位名稱**：使用 `ord_rev` 不是 `ord_total`，使用 `bhv1` 判斷取消
3. **位置問題**：GA4 和 Shopline 表在不同位置，需要分步查詢
4. **數字格式**：百分比兩位小數，金額取整數
5. **Transaction ID**：格式為 17 位數字，可以直接 JOIN

---

## 📞 需要幫助？

### 問題類型與對應文件

| 問題類型 | 對應文件 |
|---------|---------|
| 如何開始使用？ | QUICK_START.md |
| 了解完整架構？ | HANDOVER_DOCUMENT.md |
| 了解程式碼結構？ | CODE_STRUCTURE.md |
| 認證設定問題？ | AUTHENTICATION_SETUP.md |
| 資料庫結構問題？ | DATABASE_SCHEMA.md |
| SQL 查詢問題？ | SQL_QUERY_UPDATE.md |
| 流量分類問題？ | TRAFFIC_CLASSIFICATION.md |
| 除錯問題？ | HANDOVER_DOCUMENT.md#常見問題與排錯 |

---

## ✅ 文件完整性檢查

### 核心文件 ✅
- [x] README.md - 專案說明
- [x] QUICK_START.md - 快速開始指南
- [x] HANDOVER_DOCUMENT.md - 完整交接文件（823 行）
- [x] CODE_STRUCTURE.md - 程式碼結構說明（747 行）

### 技術文件 ✅
- [x] AUTHENTICATION_SETUP.md - 認證設定
- [x] DATABASE_SCHEMA.md - 資料庫結構
- [x] SQL_QUERY_UPDATE.md - SQL 查詢更新
- [x] TRAFFIC_CLASSIFICATION.md - 流量分類
- [x] TRAFFIC_ANALYSIS_IMPLEMENTATION.md - 流量分析實作
- [x] TRANSACTION_ID_VERIFICATION.md - Transaction ID 驗證

### 專案記錄 ✅
- [x] CHANGELOG.md - 更新日誌
- [x] FINAL_SUMMARY.md - 完成總結
- [x] DOCUMENTATION_INDEX.md - 文件索引

---

## 📊 文件統計

- **總文件數**：17 個
- **總行數**：約 4,143 行
- **核心文件**：3 個（約 1,570 行）
- **技術文件**：6 個（約 1,200 行）
- **其他文件**：8 個（約 1,373 行）

---

## 🎯 交接檢查清單

### 新接手夥伴請確認：

- [ ] 已閱讀 `QUICK_START.md`
- [ ] 已閱讀 `HANDOVER_DOCUMENT.md`
- [ ] 已閱讀 `CODE_STRUCTURE.md`
- [ ] 已成功執行 `python src/main.py` 生成週報
- [ ] 已理解時間範圍計算（週一到週日）
- [ ] 已理解流量分析的 JOIN 邏輯
- [ ] 已理解 Transaction ID 格式
- [ ] 已了解 SQL 查詢邏輯（使用 `ord_rev`、`bhv1`）
- [ ] 已了解數字格式化規則（百分比兩位小數，金額取整數）
- [ ] 已了解常見問題與排錯方法

---

**最後更新**：2025-11-05  
**維護者**：請保持文件更新

