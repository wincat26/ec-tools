# ğŸ“˜ SDD Template â€” è¦æ ¼é§å‹•é–‹ç™¼æ–‡ä»¶ï¼ˆSpecification-Driven Developmentï¼‰

> âš™ï¸ **ç›®çš„**ï¼šè®“ AIã€PMã€å·¥ç¨‹å¸«éƒ½èƒ½è®€æ‡‚ã€Œè¦åšä»€éº¼ã€æ€éº¼åšã€æ€éº¼çŸ¥é“åšå°äº†ã€  
> ğŸ§© **é©ç”¨å°è±¡**ï¼šä»»ä½•åŠŸèƒ½æ¨¡çµ„ã€è³‡æ–™æµã€æ’ç¨‹ä»»å‹™ã€å ±è¡¨ç”Ÿæˆå™¨ã€API

---

## 1ï¸âƒ£ Context â€” èƒŒæ™¯èˆ‡ä½¿ç”¨æƒ…å¢ƒ
- **æ¨¡çµ„åç¨±**ï¼š  
- **æ‰€å±¬ç³»çµ±**ï¼šï¼ˆä¾‹å¦‚ï¼šAI ç‡Ÿé‹é¡§å•ç³»çµ± / è–ä¿ç¾…ç‡Ÿé‹è‡ªå‹•åŒ–å°ˆæ¡ˆï¼‰  
- **ä½¿ç”¨å ´æ™¯**ï¼šæ­¤æ¨¡çµ„åœ¨ä»€éº¼æ™‚å€™è¢«è§¸ç™¼ï¼Ÿï¼ˆä¾‹ï¼šæ¯é€±ä¸€æ—©ä¸Šè‡ªå‹•ç”Ÿæˆé€±å ±ï¼‰  
- **ä¸Šæ¸¸ä¾è³´**ï¼šä¾‹å¦‚ `weekly_views` æˆ– `daily_metrics`  
- **ä¸‹æ¸¸æ¶ˆè²»è€…**ï¼šä¾‹å¦‚ `weekly-report.html`ã€Google Chat Webhook  

---

## 2ï¸âƒ£ Purpose â€” ç‚ºä»€éº¼è¦åšé€™å€‹æ¨¡çµ„ï¼Ÿ
ç”¨ä¸€å¥è©±èªªæ˜å®ƒå­˜åœ¨çš„åƒ¹å€¼ã€‚  
> e.g. è‡ªå‹•ç”Ÿæˆé€±å ±ï¼Œè®“ç‡Ÿé‹åœ˜éšŠèƒ½æ–¼é€±ä¸€æ—©ä¸Šå¿«é€ŸæŒæ¡ä¸Šé€±ç¸¾æ•ˆèˆ‡æ”¹é€²æ–¹å‘ã€‚

---

## 3ï¸âƒ£ Expected Outcome â€” æˆåŠŸçµæœæ‡‰è©²æ˜¯ä»€éº¼ï¼Ÿ
| è§’è‰² | çœ‹è¦‹ä»€éº¼æˆæœï¼Ÿ | æ¸¬é‡æŒ‡æ¨™ |
|------|----------------|----------|
| ç‡Ÿé‹åœ˜éšŠ | æ¯é€±æ”¶åˆ°å››åˆ†é é€±å ± HTML | æ¯é€±æº–æ™‚ç‡ â‰¥ 99% |
| PM | èƒ½åœ¨ Chat Webhook è¿½è¹¤æˆæ•ˆ | ç„¡å ±éŒ¯ï¼ŒæŒ‡æ¨™å®Œæ•´ |
| ç³»çµ± | è‡ªå‹•åŒ–åŸ·è¡Œä¸ä¸­æ–· | Return code 0, Log SUCCESS |

---

## 4ï¸âƒ£ Functions â€” åŠŸèƒ½èªªæ˜èˆ‡é‚è¼¯
| åŠŸèƒ½ç·¨è™Ÿ | åŠŸèƒ½åç¨± | èªªæ˜ |
|-----------|-----------|------|
| F1 | è³‡æ–™è®€å– | å¾ BigQuery é€±åº¦ View åŒ¯å…¥è³‡æ–™ã€‚ |
| F2 | æ¨¡æ¿æ¸²æŸ“ | ä½¿ç”¨ Jinja2 + PyEcharts ç”Ÿæˆå ±è¡¨ã€‚ |
| F3 | æ´å¯Ÿç”Ÿæˆ | æ ¹æ“š KPI è‡ªå‹•ç”Ÿæˆæ‘˜è¦æ®µè½ã€‚ |
| F4 | æª”æ¡ˆè¼¸å‡º | å„²å­˜ HTML æª”è‡³æŒ‡å®šç›®éŒ„ä¸¦è¨˜éŒ„ Logã€‚ |

---

## 5ï¸âƒ£ Data Interface â€” è¼¸å…¥ / è¼¸å‡ºçµæ§‹
**Input Example (SQL or JSON):**
```sql
SELECT week_start, gmv, orders, roas FROM weekly_overview_metrics
```

**Output Example:**
```json
{
  "report_name": "weekly_report_2025W45.html",
  "kpi_summary": {
    "gmv": 1840000,
    "roas": 3.2
  },
  "status": "success"
}
```

---

## 6ï¸âƒ£ Page / API / UI è¨­è¨ˆç´°ç¯€ï¼ˆè¦–æ¨¡çµ„é¡å‹æ“¬ä¸€ï¼‰
### ğŸ“„ è‹¥ç‚ºå‰ç«¯ï¼å ±è¡¨ï¼š
- é é¢æ¶æ§‹ï¼š
  - Page 1ï¼šç¸½è¦½
  - Page 2ï¼šå»£å‘Š
  - Page 3ï¼šæœƒå“¡ç¶“ç‡Ÿ
  - Page 4ï¼šå»ºè­°è¡Œå‹•æ–¹æ¡ˆ
- UI å…ƒä»¶ï¼š
  - KPI Cards, Chart, Table, Insight Bullets
- ç‹€æ…‹è™•ç†ï¼š
  - Loading â†’ Error â†’ Render â†’ Export

### ğŸ”Œ è‹¥ç‚º APIï¼š
| API | Method | Input | Output | æè¿° |
|------|--------|--------|---------|------|
| `/api/report/generate` | POST | `{week: "2025-W45"}` | `{status: "success"}` | ç”Ÿæˆé€±å ± |

---

## 7ï¸âƒ£ Implementation Notes â€” å¯¦ä½œå‚™è¨»
- è…³æœ¬ä½ç½®ï¼š`demos/weekly-report-generator/src/main.py`
- æ¨¡æ¿ä½ç½®ï¼š`templates/report_template.html`
- æ’ç¨‹è¨­å®šï¼šLaunchAgent `com.weekly-report`
- æ¸¬è©¦å‘½ä»¤ï¼š
  ```bash
  python src/main.py --week 2025-W45 --dry-run
  ```

---

## 8ï¸âƒ£ Failure Modes â€” å¸¸è¦‹éŒ¯èª¤èˆ‡é˜²å‘†ç­–ç•¥
| éŒ¯èª¤æƒ…å¢ƒ | åµæ¸¬æ–¹å¼ | è™•ç†ç­–ç•¥ |
|-----------|------------|------------|
| BigQuery ç„¡è³‡æ–™ | SQL å›å‚³ç©ºé›† | å›å‚³é è¨­å ±è¡¨ï¼Œæ¨æ’­è­¦å‘Š |
| HTML Render å¤±æ•— | TemplateError | è§¸ç™¼ retry 3 æ¬¡ |
| Chat Webhook å¤±æ•— | HTTP 4xx | ç™¼é€ email alert |

---

## 9ï¸âƒ£ Success Metrics â€” æˆåŠŸæŒ‡æ¨™
| æŒ‡æ¨™ | ç›®æ¨™å€¼ | èªªæ˜ |
|------|----------|------|
| è‡ªå‹•åŒ–æˆåŠŸç‡ | â‰¥ 99% | ç„¡å ±éŒ¯åŸ·è¡Œ |
| åŸ·è¡Œæ™‚é–“ | < 3 åˆ†é˜ | ç”Ÿæˆæ•ˆç‡ |
| ç•°å¸¸èª¤å ±ç‡ | < 1% | ç²¾æº–åº¦ |

---

## ğŸ” Linked Docs â€” é—œè¯æ–‡ä»¶
- ğŸ”— ä¸Šæ¸¸æ–‡ä»¶ï¼š[weekly-views.md](./weekly-views.md)
- ğŸ”— ä¸‹æ¸¸æ–‡ä»¶ï¼š[automation-and-monitoring.md](./automation-and-monitoring.md)
- ğŸ§© å°ˆæ¡ˆæ¦‚è¿°ï¼š[project-overview.md](./project-overview.md)
- ğŸ—‚ï¸ çµæ§‹å°æ‡‰ï¼š[PROJECT_STRUCTURE.md](../../PROJECT_STRUCTURE.md)

---

## ğŸ’¡ AI Instructionï¼ˆçµ¦ AI å·¥ç­çš„æŒ‡ä»¤ï¼‰
> æ ¹æ“šä»¥ä¸Š Functions èˆ‡ Data Interfaceï¼Œ  
> ä½¿ç”¨ **Python (PyEcharts + Jinja2)** å¯¦ä½œé€±å ±ç”Ÿæˆæ¨¡çµ„ï¼Œè¼¸å‡º HTML è‡³ `output/` ç›®éŒ„ã€‚  
> è«‹åœ¨ç¨‹å¼ä¸­ä¿ç•™å¯ä¿®æ”¹åƒæ•¸ä»¥æ”¯æ´å¤šå“ç‰Œèˆ‡å¤šé€±æœŸè¼¸å‡ºã€‚

---

### ğŸ§¾ é™„éŒ„ï¼šç‰ˆæœ¬è³‡è¨Š
| æ¬„ä½ | å…§å®¹ |
|------|------|
| å»ºç«‹æ—¥æœŸ | YYYY-MM-DD |
| ä½œè€… |  |
| å°æ‡‰ç‰ˆæœ¬ | v1.0 |
| æœ€å¾Œæ›´æ–° |  |